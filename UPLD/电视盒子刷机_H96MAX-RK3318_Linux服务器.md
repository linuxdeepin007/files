---
title: 电视盒子刷机_H96MAX-RK3318_Linux服务器
date: 2023-05-02 
categories:
  - 编程电脑
  - LINUX
tags: 
   - 电视盒子
   - RK3318
   - lINUX服务器
---
因为想替换flomo软件，并且把数据控制权握在自己手里，就像之前写笔记一样。
<!-- more -->
所以自己搭建一个服务器就成了唯一选择，但是并不像github上的网页搭建一样简单，这里必须借助服务器来完成。

最为简单的方式就是购买服务器，然后部署memos软件，但是服务器的数据并不在我的掌握之中。

所以退而求其次，自己搭建一个服务器，后期内网穿透的事情就比较简单了。

## 一、为什么用电视盒子搭建服务器

作为小白，为了能够用上 `memos` ,再看了各种教程、用优盘刷linux系统之后，决定选择自己搭建服务器，经过对比服务器的载体，最终选择了电视盒子H96MAX RK3318，理由如下：

- 性能：盒子的配置（RK3318芯片+4G内存+64G储存）比云服务器高，应该能满足我的需求成本；
- 价格：小于200元，即使打水漂也在我接受范围内；
- 功耗：RK3318的TDP是5W，到手实测整机运行功率2.5W-3W；
- 体积：盒子体积（100x100x18mm）比工控机体积（200x200x33mm）减少了86.4%。

## 二、硬件准备

- 电视盒子“H96 MAX RK3318”一个（后续简称盒子）
- TF储存卡（≥2G，非SD卡）一张
- 读卡器一个
- 可联网的电脑一台
- USB接口键盘
- 一个HDMI接口显示器（含线材，可与电脑共用）

![硬件准备](https://preview.cloud.189.cn/image/imageAction?param=90F9254974444197BD952F814F75AA8F33802396228AFDD892E22FACF868086EF9DC3933C14996DE24BC5F404EB69EFD4D525E32B86A0660589A2C38A8B2AD51CB6C3F21AFDDB81BE9A6024F38BF598494107489B17A0A4C8022F4E4848B92E807958A0DD6FDBAB612D2852C2FD1BF94)

## 三、软件准备

### （一）工具及刷机固件

- 刷机工具Balena Etcher
- Multi-Tool镜像
- Armbian镜像
- SSH连接工具PuTTY

### （二）制作驱动盘

1. 将TF卡插入读卡器 ----> 将读卡器插入电脑 ----> 打开Balena Etcher ----> 选择已下载的“Multi-Tool镜像” ----> 拟刷入的目标TF卡 ----> 开始制作驱动盘；
2. 制作完成后，拔掉并重新插入读卡器，将已下载的Armbian镜像放入储存卡根目录下的images文件夹中。

## 四、开始刷机
### （一）启动
在盒子上插入储存卡、键盘、HDMI线，最后插入电源线（通电会自动开机），通过TF卡启动。

### （二）安装系统
按“enter”直接确认须知 ----> 选择“3 Erase flash” ----> 一路选择“OK” ----> 选择“5 Burn image to flash” ----> 选择“mmcblk2” ----> 选择“Armbian镜像” ----> 等待刷机完成（我用时7′27″） ----> 选择“OK” ----> 选择“9 shutdown” 关机。

![安装系统](https://preview.cloud.189.cn/image/imageAction?param=1D0F13C53E2A17780FEA7A056BEB6D4ADDAC0E67C6ABFCF0FAB399308488E77F8C8012F9C41A347C3DD657729A8CBFDD1AED074086A815A1F933DEBF4C30DFEB1C96C937D1B0FCEB36621656C70B8B67601A366682DE7637F867CB5046A0E2536349061817DDC0800E1226BD97FE9742)

### （三）首次启动
拔下盒子的电源线 ----> 取出TF卡 ----> 重新插入电源线 ----> 等待几分钟直至出现登录提示 ----> 创建管理员密码（输入两次） ----> 选择(2)zsh ----> 创建用户账户 ----> 创建用户密码（输入两次） ----> 创建用户名称 ----> 联网设置（跳过） ----> 语言设置（中文是149选项） ----> 时区选择（亚洲选4，然后中国选10） ----> 不同版本设置有些不同，根据英语提示设置即可。

![设置](https://preview.cloud.189.cn/image/imageAction?param=2E6C52DC147D77F8BE0089456292E924D6A61C1413B9003D9D3993CEF28ED6FEB7FD071FF3EBAC164C312889292D308603338BC3A4535B6B213D95E252CEA99EE44F703B5169389DDDB0147FF3138210A2ECC3AC7EA06258F848B0E5AE87E5A167C3CC28D7790021C955E83E042AA9A9)

### （四）主板设置
输入“sudo rk3318-config” ----> 输入管理员密码 ----> 不更改内存设置直接选择OK ----> 选择芯片频率（建议选1.1Ghz） ----> 选择LED灯设置Generic+wifi ----> 设置完成拔掉电源。

![]()
### （五）SSH连接
盒子插上网线（无线连接经常失败，且不清楚原因） ----> 拔掉电源重新插入 ----> 查看路由器地址（通常在路由器背面，常见地址192.168.0.1、192.168.1.1、192.168.31.1（小米）、192.168.3.1（华为）） ----> 网页地址栏输入IP地址 ----> 登陆后查看盒子的局网IP ----> 电脑上运行PuTTY（按照图片设置） ----> 确认 ----> 按账密进行登陆

![]()

### （六）替换源码镜像（加速安装）
1. 在SSH窗口中，输入`cat /etc/issue`查看当前系统的版本在SSH窗口中
2. 输入`sudo vim /etc/apt/sources.list`打开源文件，在现有地址前加“#”注释掉在电脑中
3. 打开清华源[官方地址](https://link.zhihu.com/?target=https%3A//mirrors.tuna.tsinghua.edu.cn/help/ubuntu-ports/)，根据自己的版本选择合适的源码镜像将清华源码镜像复制进去
4. `sudo apt-get upgrade` 进行源文件升级，升级需要确认，确认后需要等待较长的时间。